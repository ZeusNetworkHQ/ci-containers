# syntax=docker/dockerfile:1.4

FROM node as builder

WORKDIR /workspace

RUN <<EOF
#!/usr/bin/env bash

set -eux

apt-get update -y
apt-get install -y --no-install-recommends \
    git

git clone --branch master https://github.com/ZeusNetworkHQ/zeus-scan
cd zeus-scan
git checkout 161affe334c349d59dffe0d9f73a1bbe797e73e6

npm install
npm run css

EOF

FROM node-alpine as btc-rpc-explorer

WORKDIR /workspace

COPY --from=builder /workspace/zeus-scan .

EXPOSE 3002

ENTRYPOINT ["npm", "start"]
